import{t as J,a as K}from"./index.ba5bb4ea.js";import{I as X,a6 as Q}from"./scheduler.0ec601fd.js";import{w as T,r as Y}from"./paths.9454fd2f.js";function re(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function ae(e,t){e.d(1),t.delete(e.key)}function ie(e,t){J(e,1,1,()=>{t.delete(e.key)})}function ce(e,t,r,l,y,f,i,d,c,w,h,$){let s=e.length,E=f.length,m=s;const L={};for(;m--;)L[e[m].key]=m;const n=[],b=new Map,_=new Map,M=[];for(m=E;m--;){const a=$(y,f,m),p=r(a);let o=i.get(p);o?l&&M.push(()=>o.p(a,t)):(o=w(p,a),o.c()),b.set(p,n[m]=o),p in L&&_.set(p,Math.abs(m-L[p]))}const S=new Set,v=new Set;function k(a){K(a,1),a.m(d,h),i.set(a.key,a),h=a.first,E--}for(;s&&E;){const a=n[E-1],p=e[s-1],o=a.key,u=p.key;a===p?(h=a.first,s--,E--):b.has(u)?!i.has(o)||S.has(o)?k(a):v.has(u)?s--:_.get(o)>_.get(u)?(v.add(o),k(a)):(S.add(u),s--):(c(p,i),s--)}for(;s--;){const a=e[s];b.has(a.key)||c(a,i)}for(;E;)k(n[E-1]);return X(M),n}function ue(e,t){const r={},l={},y={$$scope:1};let f=e.length;for(;f--;){const i=e[f],d=t[f];if(d){for(const c in i)c in d||(l[c]=1);for(const c in d)y[c]||(r[c]=d[c],y[c]=1);e[f]=d}else for(const c in i)y[c]=1}for(const i in l)i in r||(r[i]=void 0);return r}function le(e){return typeof e=="object"&&e!==null?e:{}}const G=T(void 0);function de(e,t){const{computePosition:r,autoUpdate:l,offset:y,shift:f,flip:i,arrow:d,size:c,autoPlacement:w,hide:h,inline:$}=Q(G),s={open:!1,autoUpdateCleanup:()=>{}},E=':is(a[href], button, input, textarea, select, details, [tabindex]):not([tabindex="-1"])';let m;const L="https://www.skeleton.dev/utilities/popups";let n,b;function _(){n=document.querySelector(`[data-popup="${t.target}"]`)??document.createElement("div"),b=n.querySelector(".arrow")??document.createElement("div")}_();function M(){var u,U,C,x,A,I,D,F;if(!n)throw new Error(`The data-popup="${t.target}" element was not found. ${L}`);if(!r)throw new Error(`Floating UI 'computePosition' not found for data-popup="${t.target}". ${L}`);if(!y)throw new Error(`Floating UI 'offset' not found for data-popup="${t.target}". ${L}`);if(!f)throw new Error(`Floating UI 'shift' not found for data-popup="${t.target}". ${L}`);if(!i)throw new Error(`Floating UI 'flip' not found for data-popup="${t.target}". ${L}`);if(!d)throw new Error(`Floating UI 'arrow' not found for data-popup="${t.target}". ${L}`);const o=[];c&&o.push(c((u=t.middleware)==null?void 0:u.size)),w&&o.push(w((U=t.middleware)==null?void 0:U.autoPlacement)),h&&o.push(h((C=t.middleware)==null?void 0:C.hide)),$&&o.push($((x=t.middleware)==null?void 0:x.inline)),r(e,n,{placement:t.placement??"bottom",middleware:[y(((A=t.middleware)==null?void 0:A.offset)??8),f(((I=t.middleware)==null?void 0:I.shift)??{padding:8}),i((D=t.middleware)==null?void 0:D.flip),d(((F=t.middleware)==null?void 0:F.arrow)??{element:b||null}),...o]}).then(({x:R,y:H,placement:V,middlewareData:W})=>{if(Object.assign(n.style,{left:`${R}px`,top:`${H}px`}),b){const{x:O,y:j}=W.arrow,B={top:"bottom",right:"left",bottom:"top",left:"right"}[V.split("-")[0]];Object.assign(b.style,{left:O!=null?`${O}px`:"",top:j!=null?`${j}px`:"",right:"",bottom:"",[B]:"-4px"})}})}function S(){n&&(s.open=!0,t.state&&t.state({state:s.open}),M(),n.style.display="block",n.style.opacity="1",n.style.pointerEvents="auto",n.removeAttribute("inert"),s.autoUpdateCleanup=l(e,n,M),m=Array.from(n==null?void 0:n.querySelectorAll(E)))}function v(o){if(!n)return;const u=parseFloat(window.getComputedStyle(n).transitionDuration.replace("s",""))*1e3;setTimeout(()=>{s.open=!1,t.state&&t.state({state:s.open}),n.style.opacity="0",n.setAttribute("inert",""),s.autoUpdateCleanup&&s.autoUpdateCleanup(),o&&o()},u)}function k(){s.open===!1?S():v()}function a(o){if(s.open===!1||e.contains(o.target))return;if(n&&n.contains(o.target)===!1){v();return}const u=t.closeQuery===void 0?"a[href], button":t.closeQuery,U=n==null?void 0:n.querySelectorAll(u);U==null||U.forEach(C=>{C.contains(o.target)&&v()})}const p=o=>{if(s.open===!1)return;const u=o.key;if(u==="Escape"){o.preventDefault(),e.focus(),v();return}m=Array.from(n==null?void 0:n.querySelectorAll(E)),s.open&&document.activeElement===e&&(u==="ArrowDown"||u==="Tab")&&E.length>0&&m.length>0&&(o.preventDefault(),m[0].focus())};switch(t.event){case"click":e.addEventListener("click",k,!0),window.addEventListener("click",a,!0);break;case"hover":e.addEventListener("mouseover",S,!0),e.addEventListener("mouseleave",()=>v(),!0);break;case"focus-blur":e.addEventListener("focus",k,!0),e.addEventListener("blur",()=>v(),!0);break;case"focus-click":e.addEventListener("focus",S,!0),window.addEventListener("click",a,!0);break;default:throw new Error(`Event value of '${t.event}' is not supported. ${L}`)}return window.addEventListener("keydown",p,!0),M(),{update(o){v(()=>{t=o,M(),_()})},destroy(){e.removeEventListener("click",k,!0),e.removeEventListener("mouseover",S,!0),e.removeEventListener("mouseleave",()=>v(),!0),e.removeEventListener("focus",k,!0),e.removeEventListener("focus",S,!0),e.removeEventListener("blur",()=>v(),!0),window.removeEventListener("click",a,!0),window.removeEventListener("keydown",p,!0)}}}const P={};function q(e){return e==="local"?localStorage:sessionStorage}function g(e,t,r){const l=(r==null?void 0:r.serializer)??JSON,y=(r==null?void 0:r.storage)??"local";function f(i,d){q(y).setItem(i,l.stringify(d))}if(!P[e]){const i=T(t,w=>{const h=q(y).getItem(e);h&&w(l.parse(h));{const $=s=>{s.key===e&&w(s.newValue?l.parse(s.newValue):null)};return window.addEventListener("storage",$),()=>window.removeEventListener("storage",$)}}),{subscribe:d,set:c}=i;P[e]={set(w){f(e,w),c(w)},update(w){const h=w(Q(i));f(e,h),c(h)},subscribe:d}}return P[e]}const Z=g("modeOsPrefers",!1),N=g("modeUserPrefers",void 0),ee=g("modeCurrent",!1);function fe(){const e=window.matchMedia("(prefers-color-scheme: light)").matches;return Z.set(e),e}function me(e){N.set(e)}function pe(e){const t=document.documentElement.classList,r="dark";e===!0?t.remove(r):t.add(r),ee.set(e)}function we(){const e=document.documentElement.classList,t=localStorage.getItem("modeUserPrefers")==="false",r=!("modeUserPrefers"in localStorage),l=window.matchMedia("(prefers-color-scheme: dark)").matches;t||r&&l?e.add("dark"):e.remove("dark")}const z="(prefers-reduced-motion: reduce)";function te(){return window.matchMedia(z).matches}const he=Y(te(),e=>{{const t=l=>{e(l.matches)},r=window.matchMedia(z);return r.addEventListener("change",t),()=>{r.removeEventListener("change",t)}}});export{pe as a,me as b,ue as c,de as d,re as e,G as f,fe as g,ae as h,le as i,ee as m,ie as o,he as p,we as s,ce as u};
